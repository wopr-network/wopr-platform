# Test infrastructure for E2E Docker lifecycle tests.
# Mount the host Docker socket so tests can create real containers.
#
# Usage:
#   docker compose -f docker-compose.test.yml up -d
#   npm run test:e2e
#   docker compose -f docker-compose.test.yml down -v

services:
  e2e-runner:
    image: node:24-alpine
    working_dir: /app
    volumes:
      - .:/app
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      DOCKER_HOST: unix:///var/run/docker.sock
    command: ["npm", "run", "test:e2e"]
