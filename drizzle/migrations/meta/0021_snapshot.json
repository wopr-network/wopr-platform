{
  "version": "6",
  "dialect": "sqlite",
  "id": "e7c6804e-3cd2-4828-8c62-9a2c21b99327",
  "prevId": "57193637-a4a1-4f53-84a5-c7e611d4cd43",
  "tables": {
    "admin_audit_log": {
      "name": "admin_audit_log",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "admin_user": {
          "name": "admin_user",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "target_tenant": {
          "name": "target_tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "target_user": {
          "name": "target_user",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "details": {
          "name": "details",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{}'"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_admin_audit_admin": {
          "name": "idx_admin_audit_admin",
          "columns": [
            "admin_user",
            "created_at"
          ],
          "isUnique": false
        },
        "idx_admin_audit_tenant": {
          "name": "idx_admin_audit_tenant",
          "columns": [
            "target_tenant",
            "created_at"
          ],
          "isUnique": false
        },
        "idx_admin_audit_action": {
          "name": "idx_admin_audit_action",
          "columns": [
            "action",
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "admin_notes": {
      "name": "admin_notes",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "author_id": {
          "name": "author_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_pinned": {
          "name": "is_pinned",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "idx_admin_notes_tenant": {
          "name": "idx_admin_notes_tenant",
          "columns": [
            "tenant_id",
            "created_at"
          ],
          "isUnique": false
        },
        "idx_admin_notes_author": {
          "name": "idx_admin_notes_author",
          "columns": [
            "author_id"
          ],
          "isUnique": false
        },
        "idx_admin_notes_pinned": {
          "name": "idx_admin_notes_pinned",
          "columns": [
            "tenant_id",
            "is_pinned"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "admin_users": {
      "name": "admin_users",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'user'"
        },
        "credit_balance_cents": {
          "name": "credit_balance_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "agent_count": {
          "name": "agent_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "last_seen": {
          "name": "last_seen",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_admin_users_email": {
          "name": "idx_admin_users_email",
          "columns": [
            "email"
          ],
          "isUnique": false
        },
        "idx_admin_users_tenant": {
          "name": "idx_admin_users_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_admin_users_status": {
          "name": "idx_admin_users_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_admin_users_role": {
          "name": "idx_admin_users_role",
          "columns": [
            "role"
          ],
          "isUnique": false
        },
        "idx_admin_users_created": {
          "name": "idx_admin_users_created",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        },
        "idx_admin_users_last_seen": {
          "name": "idx_admin_users_last_seen",
          "columns": [
            "last_seen"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_admin_users_status": {
          "name": "chk_admin_users_status",
          "value": "\"admin_users\".\"status\" IN ('active', 'suspended', 'grace_period', 'dormant', 'banned')"
        },
        "chk_admin_users_role": {
          "name": "chk_admin_users_role",
          "value": "\"admin_users\".\"role\" IN ('platform_admin', 'tenant_admin', 'user')"
        }
      }
    },
    "bulk_undo_grants": {
      "name": "bulk_undo_grants",
      "columns": {
        "operation_id": {
          "name": "operation_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_ids": {
          "name": "tenant_ids",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount_cents": {
          "name": "amount_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "admin_user": {
          "name": "admin_user",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "undo_deadline": {
          "name": "undo_deadline",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "undone": {
          "name": "undone",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        }
      },
      "indexes": {
        "idx_bulk_undo_deadline": {
          "name": "idx_bulk_undo_deadline",
          "columns": [
            "undo_deadline"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "audit_log": {
      "name": "audit_log",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "auth_method": {
          "name": "auth_method",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "resource_type": {
          "name": "resource_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "resource_id": {
          "name": "resource_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "details": {
          "name": "details",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_audit_timestamp": {
          "name": "idx_audit_timestamp",
          "columns": [
            "timestamp"
          ],
          "isUnique": false
        },
        "idx_audit_user_id": {
          "name": "idx_audit_user_id",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_audit_action": {
          "name": "idx_audit_action",
          "columns": [
            "action"
          ],
          "isUnique": false
        },
        "idx_audit_resource": {
          "name": "idx_audit_resource",
          "columns": [
            "resource_type",
            "resource_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "bot_instances": {
      "name": "bot_instances",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "node_id": {
          "name": "node_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "billing_state": {
          "name": "billing_state",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "suspended_at": {
          "name": "suspended_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "destroy_after": {
          "name": "destroy_after",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "idx_bot_instances_tenant": {
          "name": "idx_bot_instances_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_bot_instances_billing_state": {
          "name": "idx_bot_instances_billing_state",
          "columns": [
            "billing_state"
          ],
          "isUnique": false
        },
        "idx_bot_instances_destroy_after": {
          "name": "idx_bot_instances_destroy_after",
          "columns": [
            "destroy_after"
          ],
          "isUnique": false
        },
        "idx_bot_instances_node": {
          "name": "idx_bot_instances_node",
          "columns": [
            "node_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "bot_profiles": {
      "name": "bot_profiles",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "env": {
          "name": "env",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{}'"
        },
        "restart_policy": {
          "name": "restart_policy",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'unless-stopped'"
        },
        "update_policy": {
          "name": "update_policy",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'on-push'"
        },
        "release_channel": {
          "name": "release_channel",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'stable'"
        },
        "volume_name": {
          "name": "volume_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "discovery_json": {
          "name": "discovery_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "''"
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "idx_bot_profiles_tenant": {
          "name": "idx_bot_profiles_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_bot_profiles_name": {
          "name": "idx_bot_profiles_name",
          "columns": [
            "tenant_id",
            "name"
          ],
          "isUnique": false
        },
        "idx_bot_profiles_release_channel": {
          "name": "idx_bot_profiles_release_channel",
          "columns": [
            "release_channel"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "credit_auto_topup": {
      "name": "credit_auto_topup",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount_cents": {
          "name": "amount_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "failure_reason": {
          "name": "failure_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "payment_reference": {
          "name": "payment_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "idx_auto_topup_tenant": {
          "name": "idx_auto_topup_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_auto_topup_status": {
          "name": "idx_auto_topup_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_auto_topup_created": {
          "name": "idx_auto_topup_created",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        },
        "idx_auto_topup_tenant_created": {
          "name": "idx_auto_topup_tenant_created",
          "columns": [
            "tenant_id",
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "credit_auto_topup_settings": {
      "name": "credit_auto_topup_settings",
      "columns": {
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "usage_enabled": {
          "name": "usage_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "usage_threshold_cents": {
          "name": "usage_threshold_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 100
        },
        "usage_topup_cents": {
          "name": "usage_topup_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 500
        },
        "usage_consecutive_failures": {
          "name": "usage_consecutive_failures",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "usage_charge_in_flight": {
          "name": "usage_charge_in_flight",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "schedule_enabled": {
          "name": "schedule_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "schedule_amount_cents": {
          "name": "schedule_amount_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 500
        },
        "schedule_interval_hours": {
          "name": "schedule_interval_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 168
        },
        "schedule_next_at": {
          "name": "schedule_next_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "schedule_consecutive_failures": {
          "name": "schedule_consecutive_failures",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "idx_auto_topup_settings_usage": {
          "name": "idx_auto_topup_settings_usage",
          "columns": [
            "usage_enabled"
          ],
          "isUnique": false
        },
        "idx_auto_topup_settings_schedule": {
          "name": "idx_auto_topup_settings_schedule",
          "columns": [
            "schedule_enabled",
            "schedule_next_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "credit_balances": {
      "name": "credit_balances",
      "columns": {
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "balance_cents": {
          "name": "balance_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "last_updated": {
          "name": "last_updated",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "credit_transactions": {
      "name": "credit_transactions",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount_cents": {
          "name": "amount_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "balance_after_cents": {
          "name": "balance_after_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "reference_id": {
          "name": "reference_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "funding_source": {
          "name": "funding_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "credit_transactions_reference_id_unique": {
          "name": "credit_transactions_reference_id_unique",
          "columns": [
            "reference_id"
          ],
          "isUnique": true
        },
        "idx_credit_tx_tenant": {
          "name": "idx_credit_tx_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_credit_tx_type": {
          "name": "idx_credit_tx_type",
          "columns": [
            "type"
          ],
          "isUnique": false
        },
        "idx_credit_tx_ref": {
          "name": "idx_credit_tx_ref",
          "columns": [
            "reference_id"
          ],
          "isUnique": false
        },
        "idx_credit_tx_created": {
          "name": "idx_credit_tx_created",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        },
        "idx_credit_tx_tenant_created": {
          "name": "idx_credit_tx_tenant_created",
          "columns": [
            "tenant_id",
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "email_notifications": {
      "name": "email_notifications",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "email_type": {
          "name": "email_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sent_at": {
          "name": "sent_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "sent_date": {
          "name": "sent_date",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_email_notif_tenant": {
          "name": "idx_email_notif_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_email_notif_type": {
          "name": "idx_email_notif_type",
          "columns": [
            "email_type"
          ],
          "isUnique": false
        },
        "uniq_email_per_day": {
          "name": "uniq_email_per_day",
          "columns": [
            "tenant_id",
            "email_type",
            "sent_date"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "gpu_nodes": {
      "name": "gpu_nodes",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "droplet_id": {
          "name": "droplet_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "host": {
          "name": "host",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "region": {
          "name": "region",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "size": {
          "name": "size",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'provisioning'"
        },
        "provision_stage": {
          "name": "provision_stage",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'creating'"
        },
        "service_health": {
          "name": "service_health",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "monthly_cost_cents": {
          "name": "monthly_cost_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_health_at": {
          "name": "last_health_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "idx_gpu_nodes_status": {
          "name": "idx_gpu_nodes_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_gpu_nodes_region": {
          "name": "idx_gpu_nodes_region",
          "columns": [
            "region"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "billing_period_summaries": {
      "name": "billing_period_summaries",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "capability": {
          "name": "capability",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "event_count": {
          "name": "event_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_cost": {
          "name": "total_cost",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_charge": {
          "name": "total_charge",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_duration": {
          "name": "total_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "period_start": {
          "name": "period_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "period_end": {
          "name": "period_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_billing_period_unique": {
          "name": "idx_billing_period_unique",
          "columns": [
            "tenant",
            "capability",
            "provider",
            "period_start"
          ],
          "isUnique": true
        },
        "idx_billing_period_tenant": {
          "name": "idx_billing_period_tenant",
          "columns": [
            "tenant",
            "period_start"
          ],
          "isUnique": false
        },
        "idx_billing_period_window": {
          "name": "idx_billing_period_window",
          "columns": [
            "period_start",
            "period_end"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "meter_events": {
      "name": "meter_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "cost": {
          "name": "cost",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "charge": {
          "name": "charge",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "capability": {
          "name": "capability",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "usage_units": {
          "name": "usage_units",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "usage_unit_type": {
          "name": "usage_unit_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tier": {
          "name": "tier",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_meter_tenant": {
          "name": "idx_meter_tenant",
          "columns": [
            "tenant"
          ],
          "isUnique": false
        },
        "idx_meter_timestamp": {
          "name": "idx_meter_timestamp",
          "columns": [
            "timestamp"
          ],
          "isUnique": false
        },
        "idx_meter_capability": {
          "name": "idx_meter_capability",
          "columns": [
            "capability"
          ],
          "isUnique": false
        },
        "idx_meter_session": {
          "name": "idx_meter_session",
          "columns": [
            "session_id"
          ],
          "isUnique": false
        },
        "idx_meter_tenant_timestamp": {
          "name": "idx_meter_tenant_timestamp",
          "columns": [
            "tenant",
            "timestamp"
          ],
          "isUnique": false
        },
        "idx_meter_tier": {
          "name": "idx_meter_tier",
          "columns": [
            "tier"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "usage_summaries": {
      "name": "usage_summaries",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "capability": {
          "name": "capability",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "event_count": {
          "name": "event_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_cost": {
          "name": "total_cost",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_charge": {
          "name": "total_charge",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_duration": {
          "name": "total_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "window_start": {
          "name": "window_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "window_end": {
          "name": "window_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_summary_tenant": {
          "name": "idx_summary_tenant",
          "columns": [
            "tenant",
            "window_start"
          ],
          "isUnique": false
        },
        "idx_summary_window": {
          "name": "idx_summary_window",
          "columns": [
            "window_start",
            "window_end"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "node_registration_tokens": {
      "name": "node_registration_tokens",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "used": {
          "name": "used",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "node_id": {
          "name": "node_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "used_at": {
          "name": "used_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_reg_tokens_user": {
          "name": "idx_reg_tokens_user",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_reg_tokens_expires": {
          "name": "idx_reg_tokens_expires",
          "columns": [
            "expires_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "node_transitions": {
      "name": "node_transitions",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "node_id": {
          "name": "node_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "from_status": {
          "name": "from_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "to_status": {
          "name": "to_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "triggered_by": {
          "name": "triggered_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_node_transitions_node": {
          "name": "idx_node_transitions_node",
          "columns": [
            "node_id"
          ],
          "isUnique": false
        },
        "idx_node_transitions_created": {
          "name": "idx_node_transitions_created",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "nodes": {
      "name": "nodes",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "host": {
          "name": "host",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "capacity_mb": {
          "name": "capacity_mb",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "used_mb": {
          "name": "used_mb",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "agent_version": {
          "name": "agent_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_heartbeat_at": {
          "name": "last_heartbeat_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "registered_at": {
          "name": "registered_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "droplet_id": {
          "name": "droplet_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "region": {
          "name": "region",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "size": {
          "name": "size",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "monthly_cost_cents": {
          "name": "monthly_cost_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "provision_stage": {
          "name": "provision_stage",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "drain_status": {
          "name": "drain_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "drain_migrated": {
          "name": "drain_migrated",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "drain_total": {
          "name": "drain_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "owner_user_id": {
          "name": "owner_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "node_secret": {
          "name": "node_secret",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_nodes_status": {
          "name": "idx_nodes_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_nodes_droplet": {
          "name": "idx_nodes_droplet",
          "columns": [
            "droplet_id"
          ],
          "isUnique": false
        },
        "idx_nodes_node_secret": {
          "name": "idx_nodes_node_secret",
          "columns": [
            "node_secret"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "notification_queue": {
      "name": "notification_queue",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "email_type": {
          "name": "email_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "recipient_email": {
          "name": "recipient_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "payload": {
          "name": "payload",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{}'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "attempts": {
          "name": "attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "max_attempts": {
          "name": "max_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 3
        },
        "last_attempt_at": {
          "name": "last_attempt_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "retry_after": {
          "name": "retry_after",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch() * 1000)"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_notif_queue_tenant": {
          "name": "idx_notif_queue_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_notif_queue_status": {
          "name": "idx_notif_queue_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_notif_queue_type": {
          "name": "idx_notif_queue_type",
          "columns": [
            "email_type"
          ],
          "isUnique": false
        },
        "idx_notif_queue_retry": {
          "name": "idx_notif_queue_retry",
          "columns": [
            "status",
            "retry_after"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "provider_credentials": {
      "name": "provider_credentials",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "key_name": {
          "name": "key_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "encrypted_value": {
          "name": "encrypted_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "auth_type": {
          "name": "auth_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "auth_header": {
          "name": "auth_header",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "last_validated": {
          "name": "last_validated",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "rotated_at": {
          "name": "rotated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_provider_creds_provider": {
          "name": "idx_provider_creds_provider",
          "columns": [
            "provider"
          ],
          "isUnique": false
        },
        "idx_provider_creds_active": {
          "name": "idx_provider_creds_active",
          "columns": [
            "provider",
            "is_active"
          ],
          "isUnique": false
        },
        "idx_provider_creds_created_by": {
          "name": "idx_provider_creds_created_by",
          "columns": [
            "created_by"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "provider_costs": {
      "name": "provider_costs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "capability": {
          "name": "capability",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "adapter": {
          "name": "adapter",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "unit": {
          "name": "unit",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "cost_usd": {
          "name": "cost_usd",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "latency_class": {
          "name": "latency_class",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'standard'"
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "idx_provider_costs_capability": {
          "name": "idx_provider_costs_capability",
          "columns": [
            "capability"
          ],
          "isUnique": false
        },
        "idx_provider_costs_adapter": {
          "name": "idx_provider_costs_adapter",
          "columns": [
            "adapter"
          ],
          "isUnique": false
        },
        "idx_provider_costs_active": {
          "name": "idx_provider_costs_active",
          "columns": [
            "is_active"
          ],
          "isUnique": false
        },
        "idx_provider_costs_cap_adapter_model": {
          "name": "idx_provider_costs_cap_adapter_model",
          "columns": [
            "capability",
            "adapter",
            "model"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "sell_rates": {
      "name": "sell_rates",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "capability": {
          "name": "capability",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "unit": {
          "name": "unit",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "price_usd": {
          "name": "price_usd",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "idx_sell_rates_capability": {
          "name": "idx_sell_rates_capability",
          "columns": [
            "capability"
          ],
          "isUnique": false
        },
        "idx_sell_rates_active": {
          "name": "idx_sell_rates_active",
          "columns": [
            "is_active"
          ],
          "isUnique": false
        },
        "idx_sell_rates_cap_model": {
          "name": "idx_sell_rates_cap_model",
          "columns": [
            "capability",
            "model"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "recovery_events": {
      "name": "recovery_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "node_id": {
          "name": "node_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "trigger": {
          "name": "trigger",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tenants_total": {
          "name": "tenants_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tenants_recovered": {
          "name": "tenants_recovered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tenants_failed": {
          "name": "tenants_failed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tenants_waiting": {
          "name": "tenants_waiting",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "report_json": {
          "name": "report_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_recovery_events_node": {
          "name": "idx_recovery_events_node",
          "columns": [
            "node_id"
          ],
          "isUnique": false
        },
        "idx_recovery_events_status": {
          "name": "idx_recovery_events_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "recovery_items": {
      "name": "recovery_items",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "recovery_event_id": {
          "name": "recovery_event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source_node": {
          "name": "source_node",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "target_node": {
          "name": "target_node",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "backup_key": {
          "name": "backup_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_recovery_items_event": {
          "name": "idx_recovery_items_event",
          "columns": [
            "recovery_event_id"
          ],
          "isUnique": false
        },
        "idx_recovery_items_tenant": {
          "name": "idx_recovery_items_tenant",
          "columns": [
            "tenant"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "tenant_security_settings": {
      "name": "tenant_security_settings",
      "columns": {
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "require_two_factor": {
          "name": "require_two_factor",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "restore_log": {
      "name": "restore_log",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "snapshot_key": {
          "name": "snapshot_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "pre_restore_key": {
          "name": "pre_restore_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "restored_at": {
          "name": "restored_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "restored_by": {
          "name": "restored_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_restore_log_tenant": {
          "name": "idx_restore_log_tenant",
          "columns": [
            "tenant",
            "restored_at"
          ],
          "isUnique": false
        },
        "idx_restore_log_restored_by": {
          "name": "idx_restore_log_restored_by",
          "columns": [
            "restored_by"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "snapshots": {
      "name": "snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "''"
        },
        "instance_id": {
          "name": "instance_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'on-demand'"
        },
        "s3_key": {
          "name": "s3_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "size_mb": {
          "name": "size_mb",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "size_bytes": {
          "name": "size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "node_id": {
          "name": "node_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "trigger": {
          "name": "trigger",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "plugins": {
          "name": "plugins",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'[]'"
        },
        "config_hash": {
          "name": "config_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "''"
        },
        "storage_path": {
          "name": "storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_snapshots_instance": {
          "name": "idx_snapshots_instance",
          "columns": [
            "instance_id",
            "\"created_at\" desc"
          ],
          "isUnique": false
        },
        "idx_snapshots_user": {
          "name": "idx_snapshots_user",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_snapshots_tenant": {
          "name": "idx_snapshots_tenant",
          "columns": [
            "tenant"
          ],
          "isUnique": false
        },
        "idx_snapshots_type": {
          "name": "idx_snapshots_type",
          "columns": [
            "type"
          ],
          "isUnique": false
        },
        "idx_snapshots_expires": {
          "name": "idx_snapshots_expires",
          "columns": [
            "expires_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "trigger_check": {
          "name": "trigger_check",
          "value": "trigger IN ('manual', 'scheduled', 'pre_update')"
        },
        "type_check": {
          "name": "type_check",
          "value": "type IN ('nightly', 'on-demand', 'pre-restore')"
        }
      }
    },
    "stripe_usage_reports": {
      "name": "stripe_usage_reports",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "capability": {
          "name": "capability",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "period_start": {
          "name": "period_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "period_end": {
          "name": "period_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "event_name": {
          "name": "event_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "value_cents": {
          "name": "value_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reported_at": {
          "name": "reported_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_stripe_usage_unique": {
          "name": "idx_stripe_usage_unique",
          "columns": [
            "tenant",
            "capability",
            "provider",
            "period_start"
          ],
          "isUnique": true
        },
        "idx_stripe_usage_tenant": {
          "name": "idx_stripe_usage_tenant",
          "columns": [
            "tenant",
            "reported_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "tenant_customers": {
      "name": "tenant_customers",
      "columns": {
        "tenant": {
          "name": "tenant",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tier": {
          "name": "tier",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'free'"
        },
        "billing_hold": {
          "name": "billing_hold",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "tenant_customers_stripe_customer_id_unique": {
          "name": "tenant_customers_stripe_customer_id_unique",
          "columns": [
            "stripe_customer_id"
          ],
          "isUnique": true
        },
        "idx_tenant_customers_stripe": {
          "name": "idx_tenant_customers_stripe",
          "columns": [
            "stripe_customer_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "tenant_status": {
      "name": "tenant_status",
      "columns": {
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "status_reason": {
          "name": "status_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status_changed_at": {
          "name": "status_changed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status_changed_by": {
          "name": "status_changed_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "grace_deadline": {
          "name": "grace_deadline",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "data_delete_after": {
          "name": "data_delete_after",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "idx_tenant_status_status": {
          "name": "idx_tenant_status_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_tenant_status_grace": {
          "name": "idx_tenant_status_grace",
          "columns": [
            "grace_deadline"
          ],
          "isUnique": false
        },
        "idx_tenant_status_delete": {
          "name": "idx_tenant_status_delete",
          "columns": [
            "data_delete_after"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "user_roles": {
      "name": "user_roles",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "granted_by": {
          "name": "granted_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "granted_at": {
          "name": "granted_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_user_roles_tenant": {
          "name": "idx_user_roles_tenant",
          "columns": [
            "tenant_id"
          ],
          "isUnique": false
        },
        "idx_user_roles_role": {
          "name": "idx_user_roles_role",
          "columns": [
            "role"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "user_roles_user_id_tenant_id_pk": {
          "columns": [
            "user_id",
            "tenant_id"
          ],
          "name": "user_roles_user_id_tenant_id_pk"
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {
      "idx_snapshots_instance": {
        "columns": {
          "\"created_at\" desc": {
            "isExpression": true
          }
        }
      }
    }
  }
}